<script type="importmap" data-turbo-track="reload">
  <%=
    # This ended up being the best solution to not drag in the importmap from the host app when we're editing the site
    JSON.pretty_generate({
      imports: {
        # Main loader
        "application_panda_cms": asset_path("panda/cms/application_panda_cms.js"),
        # Vendored
        "@hotwired/turbo": asset_path("panda/cms/@hotwired--turbo.js"),
        "@hotwired/stimulus": asset_path("panda/cms/@hotwired--stimulus.js"),
        "@hotwired/stimulus-loading": asset_path("stimulus-loading.js"),
        "@editorjs/editorjs": asset_path("panda/cms/@editorjs--editorjs.js"),
        "tailwindcss-stimulus-components": asset_path("panda/cms/tailwindcss-stimulus-components.js"),
        # Our controllers
        "panda/cms/controllers/dashboard_controller": asset_path("panda/cms/controllers/dashboard_controller.js"),
        "panda/cms/controllers/slug_controller": asset_path("panda/cms/controllers/slug_controller.js"),
        "panda/cms/controllers/editor_form_controller": asset_path("panda/cms/controllers/editor_form_controller.js"),
        "panda/cms/controllers/editor_controller": asset_path("panda/cms/controllers/editor_controller.js"),
        # Our page editor
        "panda/cms/editor/plain_text_editor": asset_path("panda/cms/editor/plain_text_editor.js"),
        "panda/cms/editor/resource_loader": asset_path("panda/cms/editor/resource_loader.js"),
        "panda/cms/editor/editor_js_initializer": asset_path("panda/cms/editor/editor_js_initializer.js"),
        "panda/cms/editor/editor_js_config": asset_path("panda/cms/editor/editor_js_config.js"),
        # Main controller loader
        "controllers": asset_path("panda/cms/controllers/index.js"),
      }
    }).html_safe
  %>
</script>
<script type="module">
  import "application_panda_cms"
</script>
